# Краткое описание инцидента

В 22:52 (21.10) по UTC на нескольких сервисах GitHub.com пострадали несколько сетевых разделов и последующим сбоем базы данных, что привело к появлению непоследовательной информации на веб-сайте.

# Причина инцидента

Во время технического обслуживания произошёл разрыв связи между узлом сети и центром данных из-за замены оборудования.

# Воздействие

Инцидент привел к деградации работы платформы GitHub на протяжении более суток, что затронуло доставку вебхуков, сборку страниц и доступность основных систем.

# Обнаружение

Система мониторинга начала отправлять алерты об многочисленных ошибках в системе. В 23:02 дежурные инженеры определили, что множество кластеров баз данных находились в невалидном состоянии.

# Реакция

Остановлены все процессы для предотвращения дальнейшей рассинхронизации. Был составлен план восстановления из бэкапа.

# Восстановление

Были созданы новые кластера баз данных MySQL. И загружены последние доступные бэкапы баз данных. Затем вручную были устраненые противоречия

# Таймлайн

- 21.10.2018 22:52 UTC - Во время запланированного технического обслуживания замена оборудования для передачи на 100G привела к кратковременному разрыву связи между узлом сети US East Coast и основным центром данных на Восточном побережье.
- 21.10.2018 22:54 UTC - Система мониторинга начала фиксировать многочисленные ошибки.
- 21.10.2018 23:07 UTC - Команда залочила утилиты деплоя, для предотвращения дополнительных возможных изменений.
- 21.10.2018 23:13 UTC - Команда приступила к изучению проблемы.
- 21.10.2018 23:19 UTC - Команда ввела режим частичной деградации: были приостановлены доставки вебхуков и сборка GitHub Pages.
- 22.10.2018 00:05 UTC - Была разработана стратегия восстановления: восстановление из резервных копий, синхронизация реплик, возврат к стабильной топологии обслуживания.
- 22.10.2018 00:41 UTC - Начался процесс восстановления из бекапа, параллельно инженеры искали способы ускорить передачу данных.
- 22.10.2018 06:51 UTC - Несколько кластеров завершили восстановление из бекапов в датацентре на восточном побережье и начали репликацию данных с датацентра на западном побережье.
- 22.10.2018 07:46 UTC - GutHub опубликовали пост в блоге, чтобы донести пользователям больше информации. Это потребовало особых усилий, так блог использует GutHub Pages, сборка страниц для которого ранее была остановлена.
- 22.10.2018 11:12 UTC - Главные базы данных были возвращены к центру данных на Восточном побережье.
- 22.10.2018 13:15 UTC - Команда увеличила ресурсы обработки для ускорения синхронизации реплик.
- 22.10.2018 16:24 UTC - Ситуация стабилизировалась, однако оставалась очередь задач, связанных с вебхуками и Pages, что потребовало дополнительного времени на завершение их обработки.
- 22.10.2018 23:03 UTC - Очередь была полностью обработана, система возвращена в нормальное состояние.

# Последующие действия

- Изменение настройки оркестратора: исключить переключение на реплику в другом регионе
- Переход на новый механизм отчетности о статусе
- Ускорение инициацивы по поддержка резервирования N+1 на уровне объекта.
