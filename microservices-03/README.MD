# Задание 1

Для решения требований по обеспечению процесса разработки с использованием облачной системы, системы контроля версий Git, поддержки непрерывной интеграции и доставки, можно предложить GitLab.

GitLab — это мощная платформа для управления проектами, контроля версий и автоматизации процессов разработки (CI/CD). Вот почему его использование целесообразно для решения описанных задач:

### 1. Облачное решение и поддержка Git

    Облако: GitLab доступен как облачный сервис на платформе GitLab.com. Это обеспечивает легкость внедрения и минимальные затраты на обслуживание инфраструктуры.
    Git: Полностью поддерживается система контроля версий Git, что соответствует вашему требованию.


### 2. Управление репозиториями

    Репозиторий на каждый сервис: GitLab позволяет создавать отдельные проекты для каждого сервиса, обеспечивая структурированное управление кодом.

### 3. Автоматизированный CI/CD-процесс

    Непрерывная интеграция (CI):
        Запуск сборки по событию: GitLab CI/CD позволяет автоматически запускать сборку при событиях в системе контроля версий, таких как commit или merge request.
        Запуск сборки по кнопке: Возможен ручной запуск сборки с помощью кнопки или API-запросов, что полезно для случаев, когда нужно указать дополнительные параметры.
    Непрерывная доставка (CD):
        Параметризация сборок: Возможность настройки различных конфигураций для сборки из одного репозитория, включая привязку настроек к конкретной сборке.
        Шаблонные конфигурации: Поддерживается создание шаблонов для повторяемых конфигураций сборок, что упрощает настройку новых проектов.

### 4. Безопасное хранение секретов

    Vault: GitLab интегрирован с HashiCorp Vault, что позволяет безопасно хранить конфиденциальные данные, такие как пароли и ключи доступа.
    Интеграция с Kubernetes: Поддержка развертывания приложений в Kubernetes и настройка секретов для безопасного доступа к ресурсам.

### 5. Поддержка кастомных шагов и образов

    Кастомные шаги: GitLab CI/CD позволяет добавлять кастомные команды и скрипты для выполнения специфичных действий в процессе сборки.
    Докер-образы: Поддерживается использование собственных Docker-образов для сборки проектов, что повышает гибкость и ускоряет процесс разработки.

### 6. Масштабируемость и производительность

    Параллельная сборка и тестирование: GitLab CI/CD поддерживает параллельный запуск сборок и тестов, позволяя эффективно распределять нагрузку между агентами.
    Развертывание агентов на собственных серверах: Возможность развернуть runner’ы GitLab на собственных серверах для повышения производительности и контроля над инфраструктурой.

### 7. Открытый исходный код и сообщество

    GitLab является платформой с открытым исходным кодом, что делает её доступной для адаптации и расширения функционала под конкретные нужды.
    Активное сообщество разработчиков и пользователей, что способствует быстрому решению проблем и внедрению новых функций.

### Заключение

GitLab удовлетворяет всем ключевым требованиям проекта, предлагая полноценное решение для управления разработкой, включая контроль версий, автоматизацию процессов CI/CD, безопасность и масштабируемость.

# Задание 2

Для решения задачи сбора и анализа логов в микросервисной архитектуре предлагаю использовать ELK Stack.

## ELK Stack

ELK Stack — это набор инструментов, который включает Elasticsearch, Logstash и Kibana. Этот стек позволяет централизованно собирать, индексировать и визуализировать логи.
Компоненты ELK Stack:

    Elasticsearch: Поисковый движок, который используется для индексации и хранения логов. Обеспечивает быстрый поиск и фильтрацию записей.
    Logstash: Агент для сбора логов. Он может получать данные из различных источников, включая stdout, обрабатывать их и отправлять в Elasticsearch.
    Kibana: Веб-интерфейс для визуализации и анализа данных, хранящихся в Elasticsearch. Позволяет создавать дашборды, проводить поиск и фильтры по записям.
    Filebeat: Легковесный агент для отправки логов непосредственно в Elasticsearch или Logstash. Он поддерживает сбор логов с различных источников, включая файлы и stdout.

### Принцип работы:

    Сбор логов:
        Filebeat устанавливается на каждом хосте, где работают сервисы. Он собирает логи из файлов или stdout и отправляет их в Logstash или напрямую в Elasticsearch.
    Централизованное хранение:
        Лог-файлы передаются через Filebeat в Elasticsearch, где они индексируются и хранятся в центральном репозитории.
    Обработка и фильтрация:
        Logstash может использоваться для дополнительной обработки и обогащения логов перед передачей в Elasticsearch. Например, добавление метаданных, парсинг строк логов и преобразование их в структурированные данные.
    Поиск и анализ:
        Kibana предоставляет удобный интерфейс для поиска, фильтрации и анализа логов. Пользователи могут строить запросы, создавать отчеты и делиться результатами поиска.
    Ссылки на сохранённые поиски:
        В Kibana можно сохранять результаты поиска и делиться ими через уникальные URL-ссылки.

### Преимущества ELK Stack:

    Поддержка множества источников логов, включая stdout.
    Высокая производительность и масштабируемость благодаря распределенной архитектуре Elasticsearch.
    Удобный веб-интерфейс Kibana для анализа и визуализации данных.
    Возможность сохранения и совместного использования результатов поиска.
    Широкая поддержка сообществом и наличие большого количества плагинов и интеграций.

## Обоснование выбора:

    Централизация логов: подход позволяет централизовать логи, собирая их с разных хостов и сервисов.
    Минимальные требования к приложениям: Поддержка сбора логов из stdout.
    Гарантированная доставка: Использование агентов гарантирует доставку логов даже в случае временных сбоев сети.
    Поиск и фильтрация: Elasticsearch обеспечивает мощные возможности поиска и фильтрации, а Kibana предоставляет удобный интерфейс для работы с ними.
    Пользовательский интерфейс: Kibana предлагает интуитивно понятный интерфейс для разработчиков, позволяющий легко искать и анализировать логи.
    Совместное использование результатов поиска: В обоих подходах возможно сохранение поисковых запросов и предоставление ссылок на них.

Таким образом, ELK Stack соответствует заданным требованиям и обеспечивает надежное решение для сбора и анализа логов в микросервисной архитектуре.

# Задание 3


Для решения задачи мониторинга и анализа состояния хостов и сервисов в микросервисной архитектуре можно использовать комбинацию популярных инструментов, которые уже зарекомендовали себя в индустрии. Это позволит обеспечить гибкость, масштабируемость и удобство настройки под конкретные нужды проекта. Вот одно из возможных решений:
Стек технологий

    1. Prometheus — система для сбора метрик с различных источников.
    2. Node Exporter — агент для экспорта метрик состояния хостов (CPU, RAM, HDD, Network).
    3. cAdvisor — инструмент для сбора метрик потребления ресурсов контейнерами (Docker, Kubernetes).
    4. Jaeger — распределенная трассировка для мониторинга взаимодействий между сервисами.
    5. Grafana — платформа для визуализации собранных метрик и построения дашбордов.

## Принцип работы
### Сбор метрик со всех хостов

    Node Exporter: Этот агент устанавливается на каждый хост и экспортирует стандартные метрики ОС, такие как использование процессора, памяти, диска и сети. Prometheus периодически собирает эти данные через HTTP-запросы.
        Метрики:
            node_cpu_seconds_total
            node_memory_MemTotal_bytes
            node_disk_io_time_seconds_total
            node_network_receive_bytes_total

### Сбор метрик состояния ресурсов хостов

Прометеус будет собирать метрики с Node Exporter и cAdvisor для мониторинга нагрузки на серверы. Эти метрики помогут отслеживать использование аппаратных ресурсов и быстро реагировать на возможные проблемы с производительностью.
### Сбор метрик потребляемых ресурсов для каждого сервиса

    cAdvisor: Если сервисы работают в Docker-контейнерах или управляются Kubernetes, cAdvisor поможет собрать детальные метрики потребления ресурсов каждым контейнером.
        Метрики:
            container_cpu_usage_seconds_total
            container_memory_usage_bytes
            container_fs_writes_total

### Сбор метрик, специфичных для каждого сервиса

    Exporters: Для каждого сервиса можно настроить специальные exporters (например, MongoDB Exporter, Redis Exporter), которые будут экспортировать метрики, характерные именно для этого сервиса. Prometheus сможет собирать эти метрики точно так же, как и общие метрики.

### Пользовательский интерфейс

    Grafana: Платформа Grafana интегрируется с Prometheus и позволяет создавать настраиваемые дашборды для визуализации любых собираемых метрик. Пользователи смогут запрашивать необходимые данные, строить графики и отчеты, а также настраивать уведомления о критических событиях.
        Панели:
            Общий мониторинг хостов
            Мониторинг отдельных сервисов
            Трассировка запросов (с помощью Jaeger)
            Логирование событий (если используется ELK Stack)

### Интеграция с инфраструктурой

    Jaeger: Используется для распределенной трассировки и помогает выявить узкие места в производительности сервисов, особенно когда запросы проходят через несколько микросервисов.

### Преимущества предложенного стека

    Масштабируемость: Все компоненты легко масштабируются и подходят для больших систем с множеством микросервисов.
    Поддержка стандартов: Прометеус широко поддерживается сообществом и является стандартом де-факто для мониторинга.
    Интерактивность: Grafana предлагает мощные инструменты для визуализации и анализа данных.
    Совместимость: Легко интегрируется с популярными инструментами оркестрации контейнеров, такими как Kubernetes.
    Прозрачность: Позволяет детально следить за состоянием всей инфраструктуры и быстро выявлять проблемы.

## Обоснование выбора

Этот стек сочетает в себе проверенные временем технологии, которые хорошо справляются с задачей мониторинга сложных распределенных систем. Prometheus обладает высокой производительностью и надежностью, а Grafana обеспечивает удобные средства для визуального представления данных. Совместная работа с Kubernetes упрощает управление и автоматизацию процесса мониторинга.